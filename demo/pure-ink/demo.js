var storyContent = ﻿{"inkVersion":20,"root":[["\n",{"->":"hub"},["done",{"#f":5,"#n":"g-0"}],null],"done",{"hub":[[{"#":"CLEAR"},"^The hub.","\n","ev","str","^All open storylets","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^3 storylets","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^3 random storylets","/str","/ev",{"*":".^.c-2","flg":4},"ev","str","^3 storylets of the non-existing \"cat\" category","/str","/ev",{"*":".^.c-3","flg":4},"ev","str","^3 storylets of the \"dog\" category","/str","/ev",{"*":".^.c-4","flg":4},"ev","str","^3 storylets of the \"exclusive\" category","/str","/ev",{"*":".^.c-5","flg":4},"ev","str","^3 storylets with a custom filter","/str","/ev",{"*":".^.c-6","flg":4},"ev","str","^1 multicategory storylet with \"foo\" category","/str","/ev",{"*":".^.c-7","flg":4},"ev","str","^Random event","/str","/ev",{"*":".^.c-8","flg":4},{"c-0":["\n","ev","str","^","/str",{"^->":"hub"},"/ev","thread",{"->":"storylets_thread"},["ev","str","^Back","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":"hub.0.g-0"},{"#f":5}]}],{"#f":5}],"c-1":["\n","ev","str","^max=3","/str",{"^->":"hub"},"/ev","thread",{"->":"storylets_thread"},["ev","str","^Back","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":"hub.0.g-0"},{"#f":5}]}],{"#f":5}],"c-2":["\n",[["ev","str","^max=3&random","/str",{"^->":"hub"},"/ev","thread",{"->":"storylets_thread"},"ev","str","^Again","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Back","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["^ ",{"->":".^.^"},"\n",{"->":"hub.0.g-0"},{"#f":5}],"c-1":["\n",{"->":"hub.0.g-0"},{"#f":5}],"#f":5,"#n":"random_3"}],null],{"#f":5}],"c-3":["\n","^Since the category doesn't exist, this will return 0 storylet.","\n","ev","str","^max=3&category=cat","/str",{"^->":"hub"},"/ev","thread",{"->":"storylets_thread"},["ev","str","^We didn't find anything, let's go back to the hub.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":"hub.0.g-0"},{"#f":5}]}],{"#f":5}],"c-4":["\n","ev","str","^max=3&category=dog","/str","/ev",{"->t->":"storylets_tunnel"},{"->":".^.^.g-0"},{"#f":5}],"c-5":["\n","^The \"exclusive\" storylets have an exclusivity value so only the highest value is selected. They are open only in this section of the demo, otherwise they would always be selected.","\n","ev","str","^max=3&category=exclusive","/str","/ev",{"->t->":"storylets_tunnel"},{"->":".^.^.g-0"},{"#f":7}],"c-6":["\n","^We use a custom filter \"3 ≤ magic ≤ 8\", defined as an ink function.","\n","^We will only get 2 storylets matching the filter.","\n","ev","str","^max=3&filter=filter_magic_3_to_8","/str",{"^->":"hub"},"/ev","thread",{"->":"storylets_thread"},["ev","str","^Back","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":"hub.0.g-0"},{"#f":5}]}],{"#f":5}],"c-7":["\n","^Let's display the \"foo\" storylets, then the \"bar\" storylets. We should have the same one twice.","\n","ev","str","^max=1&category=foo","/str",{"^->":"hub"},"/ev","thread",{"->":"storylets_thread"},"ev","str","^max=1&category=bar","/str",{"^->":"hub"},"/ev","thread",{"->":"storylets_thread"},["ev","str","^Back","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":"hub.0.g-0"},{"#f":5}]}],{"#f":5}],"c-8":["\n","^This section runs one random storylet which has content before the choices.","\n","ev","str","^category=event&max=1&random","/str",{"^->":"hub"},"/ev","thread",{"->":"storylets_thread"},["ev","str","^No more events - Continue","/str",{"VAR?":"STORYLET_COUNT"},0,"==","/ev",{"*":".^.c-0","flg":5},"ev","str","^Continue","/str","choiceCnt",0,"==","/ev",{"*":".^.c-1","flg":5},{"c-0":["\n",{"->":"hub.0.g-0"},{"#f":5}],"c-1":["^ ","\n",{"->":"hub.0.g-0"},{"#f":5}]}],{"#f":7}],"g-0":[{"->":"hub"},{"#f":5}]}],{"#f":3}],"filter_magic_3_to_8":[{"temp=":"storylet_name"},"ev",{"VAR?":"storylet_name"},"str","^magic","/str",0,{"x()":"storylets_get_prop","exArgs":3},"/ev",{"temp=":"magic"},"\n","^DEBUG: ","ev",{"VAR?":"storylet_name"},"out","/ev","^ ","ev",{"VAR?":"magic"},"out","/ev","\n","ev",3,{"VAR?":"magic"},"<=",{"VAR?":"magic"},8,"<=","&&","/ev","~ret",{"#f":1}],"the_closed_one":[{"#":"storylet"},{"open":["ev",false,"out","/ev","\n",{"#f":1}],"content":[["ev","str","^You'll never see me","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"multicat":[{"#":"storylet: foo, bar"},{"content":[["ev","str","^Multi categories storylet","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"magic_2":[{"#":"storylet"},{"magic":["ev",2,"out","/ev","\n",{"#f":1}],"content":[["ev","str","^Shazam (magic=2)","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"magic_5":[{"#":"storylet"},{"magic":["ev",2,3,"+","out","/ev","\n",{"#f":1}],"content":[["ev","str","^Abracadabra (magic=5)","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"magic_7":[{"#":"storylet"},{"magic":["ev",7,"out","/ev","\n",{"#f":1}],"content":[["ev","str","^Hocus pocus (magic=7)","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"dog_1":[{"#":"storylet: dog"},{"content":[["ev","str","^Golden Retriever","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"dog_2":[{"#":"storylet: dog"},{"urgency":["ev",4,"out","/ev","\n",{"#f":1}],"content":[["ev","str","^German Shepherd (urgency=4)","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"dog_3":[{"#":"storylet: dog"},{"content":[["ev","str","^Poodle","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"dog_4":[{"#":"storylet: dog"},{"content":[["ev","str","^Dachshund","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"exclusive_0":[{"#":"storylet: exclusive"},{"open":["ev",{"^->":"hub.0.c-5"},{"f()":"came_from"},"out","/ev","\n",{"#f":1}],"exclusivity":["ev",0,"out","/ev","\n",{"#f":1}],"content":[["ev","str","^This one is never selected (exclusivity=0)","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n","ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"exclusive_1":[{"#":"storylet: exclusive"},{"open":["ev",{"^->":"hub.0.c-5"},{"f()":"came_from"},"out","/ev","\n",{"#f":1}],"urgency":["ev",5,"out","/ev","\n",{"#f":1}],"exclusivity":["ev",1,"out","/ev","\n",{"#f":1}],"content":[["ev","str","^Visit me to open a level 2 storylet (urgency=5, exclusivity=1)","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n","ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"exclusive_2":[{"#":"storylet: exclusive"},{"open":["ev",{"^->":"hub.0.c-5"},{"f()":"came_from"},"out","/ev","\n",{"#f":1}],"urgency":["ev",2,"out","/ev","\n",{"#f":1}],"exclusivity":["ev",{"VAR?":"exclu"},"out","/ev","\n",{"#f":1}],"content":[["ev","str","^Another storylet  (urgency=2, exclusivity=","ev",{"VAR?":"exclu"},"out","/ev","^))","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"exclusive_3":[{"#":"storylet: exclusive"},{"open":["ev",{"^->":"hub.0.c-5"},{"f()":"came_from"},{"CNT?":"exclusive_1.content.0.c-0"},"&&","out","/ev","\n",{"#f":1}],"urgency":["ev",2,"out","/ev","\n",{"#f":1}],"exclusivity":["ev",2,"out","/ev","\n",{"#f":1}],"content":[["ev","str","^This is a level 2 exclusive story (urgency=2, exclusive=2)","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"exclusive_4":[{"#":"storylet: exclusive"},{"open":["ev",{"^->":"hub.0.c-5"},{"f()":"came_from"},"out","/ev","\n",{"#f":1}],"urgency":["ev",7,"out","/ev","\n",{"#f":1}],"exclusivity":["ev",1,"out","/ev","\n",{"#f":1}],"content":[["ev","str","^Urgent storylet (urgency=7, exclusive=1)","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"event_1":[{"#":"storylet: event"},{"open":["ev",{"^->":"hub.0.c-8"},{"f()":"came_from"},{"CNT?":".^.^.content"},"!","&&","out","/ev","\n",{"#f":1}],"content":[["^You found a piece of solar panel. If it's fixable, it could help with the power fluctuations.","\n","^Or it could fetch a decent price at the station.","\n","ev","str","^Store it in the workshop","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Put it in the \"for sale\" crate","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"event_2":[{"#":"storylet: event"},{"open":["ev",{"^->":"hub.0.c-8"},{"f()":"came_from"},{"CNT?":".^.^.content"},"!","&&","out","/ev","\n",{"#f":1}],"content":["^You found a plastic fragment. Probably from the broken visor of a helmet. Poor soul.","\n","^You put the fragment in the recycling bin.","\n","ev","void","/ev","->->",{"#f":1}],"#f":1}],"came_from":[{"temp=":"x"},"ev",{"VAR?":"x"},"turns",0,"==","/ev","~ret","\n",{"#f":1}],"storylets_select":[{"temp=":"query"},"ev","void","/ev","~ret",{"#f":1}],"storylets_get_next":["ev",{"^->":"storylets_internal.null_stitch"},"/ev","~ret",{"#f":1}],"storylets_get_prop":[{"temp=":"default_value"},{"temp=":"prop_name"},{"temp=":"storylet_name"},"ev",{"VAR?":"default_value"},"/ev","~ret",{"#f":1}],"storylets_tunnel":[{"temp=":"query"},"ev",{"VAR?":"query"},"/ev",{"->t->":"storylets_internal.tunnel"},"ev","void","/ev","->->",{"#f":1}],"storylets_thread":[{"temp=":"return_to"},{"temp=":"query"},"ev",{"VAR?":"query"},{"VAR?":"return_to"},"/ev","thread",{"->":"storylets_internal.thread"},{"#f":1}],"storylets_internal":[{"tunnel":[{"temp=":"query"},["ev",{"VAR?":"query"},{"^->":"storylets_internal.tunnel.1.exit_tunnel"},"/ev","thread",{"->":".^.^.^.thread"},{"*":".^.c-0","flg":8},{"c-0":["\n",{"->":".^.^.exit_tunnel"},{"#f":5}],"exit_tunnel":["ev","void","/ev","->->",{"#f":7}]}],{"#f":1}],"thread":[{"temp=":"return_to"},{"temp=":"query"},"ev",0,"/ev",{"VAR=":"STORYLET_COUNT","re":true},"ev",{"VAR?":"query"},{"x()":"storylets_select","exArgs":1},"pop","/ev","\n","ev",{"VAR?":"return_to"},"/ev","thread",{"->":".^.^.thread_recurse"},{"#f":1}],"thread_recurse":[{"temp=":"return_to"},"ev",{"x()":"storylets_get_next"},"/ev",{"temp=":"storylet_text_stitch"},"\n","ev",{"VAR?":"storylet_text_stitch"},{"^->":"storylets_internal.null_stitch"},"!=","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"STORYLET_COUNT"},1,"+",{"VAR=":"STORYLET_COUNT","re":true},"/ev","ev",{"VAR?":"storylet_text_stitch"},{"VAR?":"return_to"},"/ev","thread",{"->":".^.^.^.^.thread_in_tunnel"},"ev",{"VAR?":"return_to"},"/ev","thread",{"->":".^.^.^"},{"->":".^.^.^.12"},null]}],"nop","\n",{"#f":1}],"thread_in_tunnel":[{"temp=":"return_to"},{"temp=":"tunnel_to_run"},"ev","turn","/ev",{"temp=":"entry_turn_choice"},"\n",{"->t->":"tunnel_to_run","var":true},"ev",{"VAR?":"entry_turn_choice"},"turn","!=","/ev",[{"->":".^.b","c":true},{"b":["\n",{"->":"return_to","var":true},{"->":".^.^.^.14"},null]}],"nop","\n","done",{"#f":1}],"null_stitch":["done",{"#f":3}],"#f":1}],"global decl":["ev",0,{"VAR=":"STORYLET_COUNT"},1,{"VAR=":"exclu"},"/ev","end",null],"#f":1}],"listDefs":{}};